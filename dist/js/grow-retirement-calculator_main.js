var calculator=new Vue({el:"#calculator",data:{currentAge:"",retirementAge:"",baseSalary:"",savingsYesNo:"",currentSavings:"",annualGrowth:"",retirementIncome:"",totalNeeded:"",A:"",saveAmount:"",percentOfSalary:"",ageAdjusted:"",incomeAdjusted:"",showResults:!1,showError:!1,showAgeError:!1,showExpectations:!0,showSavings:!0,showOnTrack:!1},computed:{},methods:{savingsGoal:function(){this.currentAge&&this.retirementAge&&this.baseSalary&&this.annualGrowth&&this.retirementIncome?(this.showResults=!0,this.showError=!1,this.showAgeError=!1):(this.showError=!0,this.showResults=!1,this.showAgeError=!1),this.currentAge>this.retirementAge&&(this.showResults=!1,this.showError=!1,this.showAgeError=!0),"no"==this.savingsYesNo&&this.currentSavings;let t=this.currentSavings,e=this.annualGrowth,s=this.retirementAge-this.currentAge;tW=(54-this.currentAge)/s,tW2=(this.retirementAge-54)/s;let o=.03*tW+.015*tW2+1,r=Math.pow(o,s)*this.baseSalary,h=90-this.retirementAge,a=r*this.retirementIncome;for(this.totalNeeded=0,i=0;i<h;i++)this.totalNeeded=this.totalNeeded/Math.pow(1+.04/12,12)+a;"yes"==this.savingsYesNo&&(this.A=t*Math.pow(1+e/12,12*s),this.totalNeeded=this.totalNeeded-this.A);let n=this.totalNeeded*(e/12)/(Math.pow(1+e/12,12*s)-1);this.percentOfSalary=Math.round(n/(this.baseSalary/12)*100),n=n.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}),this.saveAmount="$"+n,console.log(n),"-"==n.charAt(0)||"0"==n.charAt(0)?(this.showSavings=!1,this.showOnTrack=!0,this.showExpectations=!1):(this.showSavings=!0,this.showOnTrack=!1,this.showExpectations=!0),this.adjustForAge(t,e),this.adjustForIncome(t,e,r,s,h)},adjustForAge:function(t,e){if("70"==this.retirementAge&&".70"==this.retirementIncome)this.showExpectations=!1;else if("70"!==this.retirementAge){let s=70-this.currentAge,i=Math.pow(1.02,s)*this.baseSalary*this.retirementIncome*20;if("yes"==this.savingsYesNo){i-=t*Math.pow(1+e/12,12*s)}let o=i*(e/12)/(Math.pow(1+e/12,12*s)-1);o=o.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}),this.ageAdjusted="If you wait until age 70 to retire, your required monthly savings go down to $"+o+"."}else"70"==this.retirementAge&&(this.ageAdjusted=" ")},adjustForIncome:function(t,e,s,o,r){if(".70"!==this.retirementIncome){let h=.7*s,a=0;for(i=0;i<r;i++)a=a/Math.pow(1+.04/12,12)+h;if("yes"==this.savingsYesNo){a-=t*Math.pow(1+e/12,12*o)}let n=a*(e/12)/(Math.pow(1+e/12,12*o)-1);n=n.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}),this.incomeAdjusted="If you can live on a tighter budget in retirement by adjusting your needs to 70% of your final salary, you only need to save $"+n+" per month."}else this.incomeAdjusted=""}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2FsY3VsYXRvciIsIlZ1ZSIsImVsIiwiZGF0YSIsImN1cnJlbnRBZ2UiLCJyZXRpcmVtZW50QWdlIiwiYmFzZVNhbGFyeSIsInNhdmluZ3NZZXNObyIsImN1cnJlbnRTYXZpbmdzIiwiYW5udWFsR3Jvd3RoIiwicmV0aXJlbWVudEluY29tZSIsInRvdGFsTmVlZGVkIiwiQSIsInNhdmVBbW91bnQiLCJwZXJjZW50T2ZTYWxhcnkiLCJhZ2VBZGp1c3RlZCIsImluY29tZUFkanVzdGVkIiwic2hvd1Jlc3VsdHMiLCJzaG93RXJyb3IiLCJzaG93QWdlRXJyb3IiLCJzaG93RXhwZWN0YXRpb25zIiwic2hvd1NhdmluZ3MiLCJzaG93T25UcmFjayIsImNvbXB1dGVkIiwibWV0aG9kcyIsInNhdmluZ3NHb2FsIiwidGhpcyIsIlAiLCJyIiwidCIsInRXIiwidFcyIiwid2VpZ2h0ZWRBdmVyYWdlIiwiZmluYWxTYWxhcnkiLCJNYXRoIiwicG93IiwieWVhcnNOZWVkZWQiLCJhbm51YWxJbmNvbWUiLCJpIiwiUE1UIiwicm91bmQiLCJ0b0xvY2FsZVN0cmluZyIsInVuZGVmaW5lZCIsIm1pbmltdW1GcmFjdGlvbkRpZ2l0cyIsIm1heGltdW1GcmFjdGlvbkRpZ2l0cyIsImNvbnNvbGUiLCJsb2ciLCJjaGFyQXQiLCJhZGp1c3RGb3JBZ2UiLCJhZGp1c3RGb3JJbmNvbWUiLCJ0QSIsImFkanVzdGVkVG90YWxOZWVkZWQiLCJQTVQyIiwiYWRqdXN0ZWRBbm51YWxJbmNvbWUiLCJhZGp1c3RlZFRvdGFsTmVlZGVkMiIsIlBNVDMiXSwibWFwcGluZ3MiOiJBQUNBLElBQUFBLFdBQUEsSUFBQUMsSUFBQSxDQUNBQyxHQUFBLGNBQ0FDLEtBQUEsQ0FFQUMsV0FBQSxHQUNBQyxjQUFBLEdBQ0FDLFdBQUEsR0FDQUMsYUFBQSxHQUNBQyxlQUFBLEdBQ0FDLGFBQUEsR0FDQUMsaUJBQUEsR0FHQUMsWUFBQSxHQUNBQyxFQUFBLEdBR0FDLFdB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QUVBbEIsS0FBQVgsWUFBQSxpRkFBQXFDLEVBQUEsUUFFQSxNQUFBMUIsS0FBQXJCLGdCQUNBcUIsS0FBQVgsWUFBQSxNQUdBa0MsZ0JBQUEsU0FBQXRCLEVBQUFDLEVBQUFLLEVBQUFKLEVBQUFPLEdBQ0EsR0FBQSxRQUFBVixLQUFBaEIsaUJBQUEsQ0FFQSxJQUFBMkMsRUFBQSxHQUFBcEIsRUFDQXFCLEVBQUEsRUFDQSxJQUFBaEIsRUFBQSxFQUFBQSxFQUFBRixFQUFBRSxJQUNBZ0IsRUFBQUEsRUFBQXBCLEtBQUFDLElBQUEsRUFBQSxJQUFBLEdBQUEsSUFBQWtCLEVBSUEsR0FBQSxPQUFBM0IsS0FBQW5CLGFBQUEsQ0FFQStDLEdBREEzQixFQUFBTyxLQUFBQyxJQUFBLEVBQUFQLEVBQUEsR0FBQSxHQUFBQyxHQUdBLElBSUEwQixFQUpBRCxHQUFBMUIsRUFBQSxLQUVBTSxLQUFBQyxJQUFBLEVBQUFQLEVBQUEsR0FBQSxHQUFBQyxHQUFBLEdBSUEwQixFQUFBQSxFQUFBZCxvQkFBQUMsRUFDQSxDQUFBQyxzQkFBQSxFQUFBQyxzQkFBQSxJQUNBbEIsS0FBQVYsZUFBQSxpSUFBQXVDLEVBQUEsbUJBRUE3QixLQUFBVixlQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gIHZhciBjYWxjdWxhdG9yID0gbmV3IFZ1ZSh7XG4gICAgZWw6ICcjY2FsY3VsYXRvcicsXG4gICAgZGF0YToge1xuICAgICAgLy8gdmFyaWFibGVzXG4gICAgICBjdXJyZW50QWdlOiAnJyxcbiAgICAgIHJldGlyZW1lbnRBZ2U6ICcnLFxuICAgICAgYmFzZVNhbGFyeTogJycsXG4gICAgICBzYXZpbmdzWWVzTm86ICcnLFxuICAgICAgY3VycmVudFNhdmluZ3M6ICcnLFxuICAgICAgYW5udWFsR3Jvd3RoOiAnJyxcbiAgICAgIHJldGlyZW1lbnRJbmNvbWU6ICcnLFxuXG4gICAgICAvLyBjYWxjdWxhdGlvbiByZXN1bHRzXG4gICAgICB0b3RhbE5lZWRlZDogJycsXG4gICAgICBBOiAnJyxcblxuICAgICAgLy8gZm9yIGRpc3BsYXkgaW4gSFRNTFxuICAgICAgc2F2ZUFtb3VudDogJycsXG4gICAgICBwZXJjZW50T2ZTYWxhcnk6ICcnLFxuXG4gICAgICAvLyBmb3IgYWRqdXN0ZWQgcmVzdWx0c1xuICAgICAgYWdlQWRqdXN0ZWQ6ICcnLFxuICAgICAgaW5jb21lQWRqdXN0ZWQ6ICcnLFxuXG4gICAgICAvLyBjb250cm9scyB2aXNpYmlsdHlcbiAgICAgIHNob3dSZXN1bHRzOiBmYWxzZSxcbiAgICAgIHNob3dFcnJvcjogZmFsc2UsXG4gICAgICBzaG93QWdlRXJyb3I6IGZhbHNlLFxuICAgICAgc2hvd0V4cGVjdGF0aW9uczogdHJ1ZSxcbiAgICAgIHNob3dTYXZpbmdzOiB0cnVlLFxuICAgICAgc2hvd09uVHJhY2s6IGZhbHNlXG4gICAgfSxcbiAgICBjb21wdXRlZDoge1xuXG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICAvLyBmdW5jdGlvbnMgZ28gaGVyZVxuICAgICAgc2F2aW5nc0dvYWw6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8vIHNob3dzIHJlc3VsdHMgb3IgZXJyb3IgYmFzZWQgb24gaW5wdXRcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEFnZSAmJiB0aGlzLnJldGlyZW1lbnRBZ2UgJiYgdGhpcy5iYXNlU2FsYXJ5ICYmIHRoaXMuYW5udWFsR3Jvd3RoICYmIHRoaXMucmV0aXJlbWVudEluY29tZSkge1xuICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuc2hvd0Vycm9yID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5zaG93QWdlRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNob3dFcnJvciA9IHRydWU7XG4gICAgICAgICAgdGhpcy5zaG93UmVzdWx0cyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuc2hvd0FnZUVycm9yID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXR1cm5zIGFuIGVycm9yIG1lc3NhZ2UgaWYgY3VycmVudCBhZ2UgaXMgaGlnaGVyIHRoYW4gcmV0aXJlbWVudCBhZ2VcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEFnZSA+IHRoaXMucmV0aXJlbWVudEFnZSkge1xuICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnNob3dFcnJvciA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuc2hvd0FnZUVycm9yID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlc2V0cyB0aGUgc2F2aW5ncyBhbW91bnQgdG8gJDAgaWYgdGhlIHVzZXIgc2VsZWN0cyBubyBzYXZpbmdzXG4gICAgICAgIGlmICh0aGlzLnNhdmluZ3NZZXNObyA9PSAnbm8nKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50U2F2aW5ncyA9PT0gJzAnO1xuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgbGV0IFAgPSB0aGlzLmN1cnJlbnRTYXZpbmdzLFxuICAgICAgICAgICAgciA9IHRoaXMuYW5udWFsR3Jvd3RoLFxuICAgICAgICAgICAgdCA9IHRoaXMucmV0aXJlbWVudEFnZSAtIHRoaXMuY3VycmVudEFnZSAvLyB0aW1lIHRvIGxpdmUgaW4gcmV0aXJlbWVudFxuICAgICAgICAgICAgdFcgPSAoNTQgLSB0aGlzLmN1cnJlbnRBZ2UpL3QsIC8vIHdlaWdodGVkIHRpbWUgdGlsbCA1NCAoZm9yIGhpZ2hlciBpbmNvbWUgaW5jcmVhc2VzKVxuICAgICAgICAgICAgdFcyID0gKHRoaXMucmV0aXJlbWVudEFnZSAtIDU0KS90OyAvLyB3ZWlnaHRlZCB0aW1lIGFmdGVyIDU0IChmb3IgbG93ZXIgaW5jb21lIGluY3JlYXNlcylcblxuICAgICAgICBsZXQgd2VpZ2h0ZWRBdmVyYWdlID0gKHRXKi4wMyArIHRXMiouMDE1KSsxOyAvLyBjYWxjdWxhdGVzIGF2ZXJhZ2UgaW5jb21lIGluY3JlYXNlXG4gICAgICAgIFxuICAgICAgICBsZXQgZmluYWxTYWxhcnkgPVxuICAgICAgICAgICAgTWF0aC5wb3cod2VpZ2h0ZWRBdmVyYWdlLCB0KSAqIHRoaXMuYmFzZVNhbGFyeTtcbiAgICAgICAgbGV0IHllYXJzTmVlZGVkID0gOTAgLSB0aGlzLnJldGlyZW1lbnRBZ2U7XG5cbiAgICAgICAgbGV0IGFubnVhbEluY29tZSA9IGZpbmFsU2FsYXJ5ICogdGhpcy5yZXRpcmVtZW50SW5jb21lO1xuXG4gICAgICAgIHRoaXMudG90YWxOZWVkZWQgPSAwOyAvLyBhdCB0aGUgZW5kIG9mIHlvdXIgbGlmZSwgeW91IG5lZWQgJDBcblxuICAgICAgICAvLyByZXZlcnNlIGNvbXBvdW5kIGludGVyZXN0IGZvcm11bGEgZm9yIGV2ZXJ5IHllYXIgb2YgcmV0aXJlbWVudC5cbiAgICAgICAgLy8gdGhpcyB3b3JrcyBiYWNrd2FyZCBmcm9tICQwIGluIHRoZSBmaW5hbCB5ZWFyIHRvIGRldGVybWluZSBob3cgbXVjaFxuICAgICAgICAvLyBtb25leSBzaG91bGQgYmUgaW4gYW4gaW52ZXN0bWVudCBhY2NvdW50IGF0IHJldGlyZW1lbnQuXG4gICAgICAgIGZvciAoaT0wOyBpIDwgeWVhcnNOZWVkZWQ7IGkrKykge1xuICAgICAgICAgIHRoaXMudG90YWxOZWVkZWQgPSAodGhpcy50b3RhbE5lZWRlZC8oTWF0aC5wb3coMSsoLjA0LzEyKSwxMikpKSArIGFubnVhbEluY29tZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZSB1c2VyIGFscmVhZHkgaGFzIHNhdmluZ3MsIGNhbGN1bGF0ZSB0aGUgdmFsdWUgb2YgdGhvc2Ugc2F2aW5ncyBhdCByZXRpcmVtZW50LlxuICAgICAgICAvLyB1cGRhdGUgdG90YWxOZWVkZWQgYnkgc3VidHJhY3Rpbmcgd2hhdCB3aWxsIGJlIHRoZXJlIGZyb20gbW9uZXkgYWxyZWFkeSBzYXZlZC5cbiAgICAgICAgaWYgKHRoaXMuc2F2aW5nc1llc05vID09ICd5ZXMnKSB7XG4gICAgICAgICAgdGhpcy5BID0gUCAqIE1hdGgucG93KCgxKyhyLzEyKSksIDEyKnQpO1xuICAgICAgICAgIHRoaXMudG90YWxOZWVkZWQgPSB0aGlzLnRvdGFsTmVlZGVkIC0gdGhpcy5BO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmV2ZXJzZSBmdXR1cmUgdmFsdWUgb2YgYSBzZXJpZXMgZm9ybXVsYVxuICAgICAgICAvLyBjYWxjdWxhdGVzIHRoZSBtb250aGx5IHNhdmluZ3MgbmVlZGVkIGJhc2VkIG9uIHRoZSBmaW5hbCB0b3RhbCBuZWVkZWRcblxuICAgICAgICBsZXQgUE1UY2FsY190b3AgPSB0aGlzLnRvdGFsTmVlZGVkKihyLzEyKTtcblxuICAgICAgICBsZXQgUE1UY2FsY19ib3R0b20gPSBNYXRoLnBvdygxKyhyLzEyKSwgMTIqdCkgLSAxO1xuXG4gICAgICAgIGxldCBQTVQgPSBQTVRjYWxjX3RvcC9QTVRjYWxjX2JvdHRvbTtcblxuICAgICAgICB0aGlzLnBlcmNlbnRPZlNhbGFyeSA9IE1hdGgucm91bmQoUE1ULyh0aGlzLmJhc2VTYWxhcnkvMTIpICogMTAwKVxuXG4gICAgICAgIFBNVCA9IFBNVC50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsXG4gICAgICAgICAgeydtaW5pbXVtRnJhY3Rpb25EaWdpdHMnOjAsJ21heGltdW1GcmFjdGlvbkRpZ2l0cyc6MH0pOztcblxuICAgICAgICB0aGlzLnNhdmVBbW91bnQgPSAnJCcgKyBQTVQ7XG5cbiAgICAgICAgY29uc29sZS5sb2coUE1UKVxuXG4gICAgICAgIGlmIChQTVQuY2hhckF0KDApID09ICctJyB8fCBQTVQuY2hhckF0KDApID09ICcwJykge1xuICAgICAgICAgIHRoaXMuc2hvd1NhdmluZ3MgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnNob3dPblRyYWNrID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnNob3dFeHBlY3RhdGlvbnMgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNob3dTYXZpbmdzID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnNob3dPblRyYWNrID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5zaG93RXhwZWN0YXRpb25zID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWRqdXN0Rm9yQWdlKFAsIHIpO1xuICAgICAgICB0aGlzLmFkanVzdEZvckluY29tZShQLCByLCBmaW5hbFNhbGFyeSwgdCwgeWVhcnNOZWVkZWQpO1xuXG5cbiAgICAgIH0sXG4gICAgICBhZGp1c3RGb3JBZ2U6IGZ1bmN0aW9uKFAsIHIpIHtcbiAgICAgICAgLy8gcmVtb3ZlcyB0aGlzIHNlY3Rpb24gaWYgdGhlIHVzZXIgaGFzIHNlbGVjdGVkIHRoZSBsb3dlc3QgZXhwZWN0YXRpb25zXG4gICAgICAgIGlmICh0aGlzLnJldGlyZW1lbnRBZ2UgPT0gJzcwJyAmJiB0aGlzLnJldGlyZW1lbnRJbmNvbWUgPT0gJy43MCcpIHtcbiAgICAgICAgICB0aGlzLnNob3dFeHBlY3RhdGlvbnM9ZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXRpcmVtZW50QWdlICE9PSAnNzAnKSB7XG5cbiAgICAgICAgICAvLyByZWNhbGN1bGF0ZXMgdCBhbmQgZmluYWxTYWxhcnkgZnJvbSBhIHJldGlyZW1lbnQgYWdlIG9mIDcwXG4gICAgICAgICAgbGV0IHRBID0gNzAgLSB0aGlzLmN1cnJlbnRBZ2U7XG4gICAgICAgICAgbGV0IGZpbmFsU2FsYXJ5QSA9IE1hdGgucG93KDEuMDIsIHRBKSAqIHRoaXMuYmFzZVNhbGFyeTtcbiAgICAgICAgICBsZXQgYWRqdXN0ZWRUb3RhbE5lZWRlZCA9IGZpbmFsU2FsYXJ5QSAqIHRoaXMucmV0aXJlbWVudEluY29tZSAqIDIwO1xuXG4gICAgICAgICAgLy8gcmVydW5zIHRoZSBjYWxjdWxhdGlvbiB3aXRoIHRoZSB1cGRhdGVkIHZhcmlhYmxlc1xuICAgICAgICAgIGlmICh0aGlzLnNhdmluZ3NZZXNObyA9PSAneWVzJykge1xuICAgICAgICAgICAgbGV0IGFBID0gUCAqIE1hdGgucG93KCgxKyhyLzEyKSksIDEyKnRBKTtcbiAgICAgICAgICAgIGFkanVzdGVkVG90YWxOZWVkZWQgPSBhZGp1c3RlZFRvdGFsTmVlZGVkIC0gYUE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBQTVRjYWxjX3RvcDIgPSBhZGp1c3RlZFRvdGFsTmVlZGVkKihyLzEyKTtcblxuICAgICAgICAgIGxldCBQTVRjYWxjX2JvdHRvbTIgPSBNYXRoLnBvdygxKyhyLzEyKSwgMTIqdEEpIC0gMTtcblxuICAgICAgICAgIGxldCBQTVQyID0gUE1UY2FsY190b3AyL1BNVGNhbGNfYm90dG9tMjtcblxuICAgICAgICAgIFBNVDIgPSBQTVQyLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHsnbWluaW11bUZyYWN0aW9uRGlnaXRzJzowLCdtYXhpbXVtRnJhY3Rpb25EaWdpdHMnOjB9KTtcblxuICAgICAgICAgIHRoaXMuYWdlQWRqdXN0ZWQgPSBcIklmIHlvdSB3YWl0IHVudGlsIGFnZSA3MCB0byByZXRpcmUsIHlvdXIgcmVxdWlyZWQgbW9udGhseSBzYXZpbmdzIGdvIGRvd24gdG8gJFwiICsgUE1UMiArIFwiLlwiO1xuXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXRpcmVtZW50QWdlID09ICc3MCcpIHtcbiAgICAgICAgICB0aGlzLmFnZUFkanVzdGVkID0gXCIgXCI7IC8vIGRvZXNuJ3QgZGlzcGxheSBzZWN0aW9uIGlmIHJldGlyZW1lbnQgYWdlIGlzIGFscmVhZHkgNzBcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFkanVzdEZvckluY29tZTogZnVuY3Rpb24oUCwgciwgZmluYWxTYWxhcnksIHQsIHllYXJzTmVlZGVkKSB7XG4gICAgICAgIGlmICh0aGlzLnJldGlyZW1lbnRJbmNvbWUgIT09IFwiLjcwXCIpIHtcbiAgICAgICAgICAvLyByZWNhbGN1bGF0ZXMgYW5udWFsIGluY29tZSBhcyA3MCUgb2YgZmluYWwgc2FsYXJ5XG4gICAgICAgICAgbGV0IGFkanVzdGVkQW5udWFsSW5jb21lID0gZmluYWxTYWxhcnkgKiAwLjc7XG4gICAgICAgICAgbGV0IGFkanVzdGVkVG90YWxOZWVkZWQyID0gMDtcbiAgICAgICAgICBmb3IgKGk9MDsgaSA8IHllYXJzTmVlZGVkOyBpKyspIHtcbiAgICAgICAgICAgIGFkanVzdGVkVG90YWxOZWVkZWQyID0gKGFkanVzdGVkVG90YWxOZWVkZWQyLyhNYXRoLnBvdygxKyguMDQvMTIpLDEyKSkpICsgYWRqdXN0ZWRBbm51YWxJbmNvbWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcmVydW5zIHRoZSBjYWxjdWxhdGlvbiB3aXRoIHVwZGF0ZXMgdmFyaWFibGVzXG4gICAgICAgICAgaWYgKHRoaXMuc2F2aW5nc1llc05vID09ICd5ZXMnKSB7XG4gICAgICAgICAgICBsZXQgaUEgPSBQICogTWF0aC5wb3coKDErKHIvMTIpKSwgMTIqdCk7XG4gICAgICAgICAgICBhZGp1c3RlZFRvdGFsTmVlZGVkMiA9IGFkanVzdGVkVG90YWxOZWVkZWQyIC0gaUE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBQTVRjYWxjX3RvcDMgPSBhZGp1c3RlZFRvdGFsTmVlZGVkMiooci8xMik7XG5cbiAgICAgICAgICBsZXQgUE1UY2FsY19ib3R0b20zID0gTWF0aC5wb3coMSsoci8xMiksIDEyKnQpIC0gMTtcblxuICAgICAgICAgIGxldCBQTVQzID0gUE1UY2FsY190b3AzL1BNVGNhbGNfYm90dG9tMztcblxuICAgICAgICAgIFBNVDMgPSBQTVQzLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHsnbWluaW11bUZyYWN0aW9uRGlnaXRzJzowLCdtYXhpbXVtRnJhY3Rpb25EaWdpdHMnOjB9KTtcbiAgICAgICAgICB0aGlzLmluY29tZUFkanVzdGVkID0gXCJJZiB5b3UgY2FuIGxpdmUgb24gYSB0aWdodGVyIGJ1ZGdldCBpbiByZXRpcmVtZW50IGJ5IGFkanVzdGluZyB5b3VyIG5lZWRzIHRvIDcwJSBvZiB5b3VyIGZpbmFsIHNhbGFyeSwgeW91IG9ubHkgbmVlZCB0byBzYXZlICRcIiArIFBNVDMgKyBcIiBwZXIgbW9udGguXCJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmluY29tZUFkanVzdGVkID0gXCJcIiAvLyBkb2Vzbid0IGRpc3BsYXkgc2VjdGlvbiBpZiBpbmNvbWUgbmVlZGVkIGlzIGFscmVhZHkgNzAlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4vLyB9LCAxMDAwKSJdfQ==
